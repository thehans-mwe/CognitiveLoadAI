<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CognitiveLoad AI ‚Äî Smart Study Assistant</title>
    <meta name="description" content="AI-powered tool to analyze cognitive load of study materials. Get difficulty scores, study plans, and text simplification.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,500;0,600;0,700;0,800;1,500;1,600&family=Poppins:wght@500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ‚îÄ‚îÄ Elegant Academic Palette ‚îÄ‚îÄ */
        :root {
            --bg-primary:#f9f8f6;--bg-secondary:#f3f1ed;--bg-card:#ffffff;--bg-surface:#f5f3ef;--bg-nav:rgba(255,255,255,.97);
            --text-primary:#1a1a2e;--text-secondary:#4a4a5a;--text-muted:#8a8a9a;--border:#e8e6e1;
            --accent:#1e3a5f;--accent-secondary:#5b8a9a;--accent-gold:#c9a84c;--accent-glow:rgba(30,58,95,.12);
            --low-bg:#ecfdf5;--low-text:#065f46;--low-bar:#34d399;
            --medium-bg:#fffbeb;--medium-text:#92400e;--medium-bar:#d97706;
            --high-bg:#fef2f2;--high-text:#991b1b;--high-bar:#dc2626;
            --shadow:0 2px 8px rgba(0,0,0,.05);--shadow-lg:0 8px 24px rgba(0,0,0,.07);
            --toast-success:#059669;--toast-error:#dc2626;--toast-warning:#d97706;--toast-info:#1e3a5f;
        }
        [data-theme="dark"]{
            --bg-primary:#0f1419;--bg-secondary:#1a1f2e;--bg-card:#1e2433;--bg-surface:#2a3142;--bg-nav:rgba(15,20,25,.97);
            --text-primary:#e8e6e1;--text-secondary:#9ca3af;--text-muted:#6b7280;--border:#2d3748;--accent-gold:#d4af5e;--accent-glow:rgba(91,138,154,.2);
            --low-bg:#064e3b;--low-text:#6ee7b7;--medium-bg:#78350f;--medium-text:#fcd34d;--high-bg:#7f1d1d;--high-text:#fca5a5;
        }
        *{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}
        body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(180deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);min-height:100vh;color:var(--text-primary);transition:all .3s ease;letter-spacing:-0.011em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

        /* Animations */
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        @keyframes slideInLeft{from{opacity:0;transform:translateX(-30px)}to{opacity:1;transform:translateX(0)}}
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        @keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        @keyframes spin{to{transform:rotate(360deg)}}
        @keyframes barGrow{from{width:0}}
        @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
        @keyframes toastIn{from{transform:translateX(120%);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes toastOut{from{transform:translateX(0);opacity:1}to{transform:translateX(120%);opacity:0}}
        @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
        .animate-float{animation:float 3s ease-in-out infinite}
        .animate-pulse{animation:pulse 2s ease-in-out infinite}

        /* Toast System */
        .toast-container{position:fixed;top:90px;right:1.5rem;z-index:9999;display:flex;flex-direction:column;gap:.75rem;pointer-events:none}
        .toast{pointer-events:auto;display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;border-radius:16px;background:var(--bg-card);border:1px solid var(--border);box-shadow:0 20px 40px rgba(0,0,0,.15);min-width:300px;max-width:420px;animation:toastIn .4s ease-out;position:relative;overflow:hidden}
        .toast.removing{animation:toastOut .3s ease-in forwards}
        .toast-icon{font-size:1.4rem;flex-shrink:0}.toast-body{flex:1}.toast-title{font-weight:600;font-size:.9rem;margin-bottom:.1rem}.toast-message{font-size:.82rem;color:var(--text-secondary);line-height:1.4}
        .toast-close{background:none;border:none;font-size:1.1rem;cursor:pointer;color:var(--text-muted);padding:.25rem;border-radius:50%;flex-shrink:0}
        .toast-close:hover{background:var(--bg-surface);color:var(--text-primary)}
        .toast-bar{position:absolute;bottom:0;left:0;height:3px;border-radius:0 0 16px 16px;transition:width linear}
        .toast.success .toast-bar{background:var(--toast-success)}.toast.error .toast-bar{background:var(--toast-error)}.toast.warning .toast-bar{background:var(--toast-warning)}.toast.info .toast-bar{background:var(--toast-info)}

        /* Progress Overlay */
        .progress-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.3);backdrop-filter:blur(4px);z-index:2000;align-items:center;justify-content:center}
        .progress-overlay.active{display:flex;animation:fadeIn .2s ease-out}
        .progress-card{background:var(--bg-card);border-radius:24px;padding:2.5rem 3rem;width:420px;max-width:90vw;text-align:center;box-shadow:0 25px 50px rgba(0,0,0,.2)}
        .progress-icon{font-size:3rem;margin-bottom:1rem;animation:float 2s ease-in-out infinite}
        .progress-title{font-family:'Poppins',sans-serif;font-size:1.3rem;font-weight:700;margin-bottom:.5rem}
        .progress-subtitle{color:var(--text-secondary);font-size:.9rem;margin-bottom:1.5rem}
        .progress-bar-track{width:100%;height:8px;background:var(--bg-surface);border-radius:4px;overflow:hidden;margin-bottom:1rem}
        .progress-bar-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-secondary));border-radius:4px;transition:width .3s ease}
        .progress-steps{display:flex;justify-content:center;gap:1.25rem;flex-wrap:wrap}
        .progress-step{display:flex;align-items:center;gap:.35rem;font-size:.8rem;color:var(--text-muted);transition:all .3s}
        .progress-step.active{color:var(--accent);font-weight:600}.progress-step.done{color:var(--low-text)}
        .progress-step-dot{width:8px;height:8px;border-radius:50%;background:var(--border);transition:all .3s}
        .progress-step.active .progress-step-dot{background:var(--accent);animation:pulse 1s infinite}.progress-step.done .progress-step-dot{background:var(--low-bar)}

        /* Offline Banner */
        .offline-banner{display:none;position:fixed;bottom:0;left:0;right:0;z-index:3000;background:var(--high-bg);color:var(--high-text);padding:.75rem;text-align:center;font-weight:600;font-size:.9rem;border-top:2px solid var(--high-bar)}
        .offline-banner.active{display:block;animation:fadeIn .3s ease-out}

        /* Navigation */
        .navbar{position:fixed;top:0;left:0;right:0;background:var(--bg-nav);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);z-index:1000;padding:.75rem 2rem}
        .navbar.scrolled{box-shadow:var(--shadow-lg)}
        .nav-container{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
        .nav-logo{display:flex;align-items:center;gap:.75rem;text-decoration:none;font-family:'Poppins',sans-serif;font-weight:700;font-size:1.5rem;background:linear-gradient(135deg,var(--accent),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;cursor:pointer}
        .nav-logo-icon{font-size:1.75rem;animation:float 3s ease-in-out infinite}
        .nav-links{display:flex;gap:.5rem}
        .nav-link{padding:.6rem 1.25rem;border-radius:50px;text-decoration:none;color:var(--text-secondary);font-weight:500;font-size:.95rem;transition:all .2s;cursor:pointer}
        .nav-link:hover{color:var(--accent);background:var(--bg-surface)}
        .nav-link.active{color:white;background:linear-gradient(135deg,var(--accent),var(--accent-secondary))}
        .nav-actions{display:flex;align-items:center;gap:.75rem}
        .theme-toggle{background:var(--bg-surface);border:1px solid var(--border);border-radius:50%;width:44px;height:44px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.25rem;transition:all .3s}
        .theme-toggle:hover{transform:rotate(20deg) scale(1.1)}
        .mobile-menu-btn{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-primary)}

        /* Pages */
        .page{display:none;padding-top:80px;min-height:100vh}.page.active{display:block;animation:fadeIn .5s ease-out}
        .container{max-width:1200px;margin:0 auto;padding:2rem}

        /* Hero */
        .hero{text-align:center;padding:5rem 2rem 6rem;position:relative;overflow:hidden}
        .hero::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 50%,var(--accent-glow),transparent 50%),radial-gradient(circle at 70% 80%,rgba(91,138,154,.08),transparent 50%);animation:gradient 15s ease infinite;z-index:-1}
        .hero-badge{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.25rem;background:var(--bg-card);border:1px solid var(--border);border-radius:50px;font-size:.85rem;color:var(--text-secondary);margin-bottom:1.75rem;font-weight:500;letter-spacing:.02em}
        .hero-badge-dot{width:8px;height:8px;background:var(--low-bar);border-radius:50%;animation:pulse 2s infinite}
        .hero h1{font-family:'Playfair Display',serif;font-size:4rem;font-weight:700;line-height:1.1;margin-bottom:1.5rem;letter-spacing:-0.02em}
        .hero h1 .gradient-text{background:linear-gradient(135deg,var(--accent),var(--accent-secondary),var(--accent-gold));background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:gradient 5s ease infinite}
        .hero-subtitle{font-size:1.2rem;color:var(--text-secondary);max-width:560px;margin:0 auto 2.5rem;line-height:1.8;font-weight:400}
        .hero-buttons{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}
        .btn{display:inline-flex;align-items:center;gap:.5rem;padding:1rem 2rem;border-radius:16px;font-size:1rem;font-weight:600;text-decoration:none;cursor:pointer;transition:all .3s;border:none}
        .btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-secondary));color:white;box-shadow:0 4px 15px var(--accent-glow)}
        .btn-primary:hover{transform:translateY(-3px);box-shadow:0 8px 25px var(--accent-glow)}
        .btn-secondary{background:var(--bg-card);color:var(--text-primary);border:2px solid var(--border)}
        .btn-secondary:hover{border-color:var(--accent);color:var(--accent);transform:translateY(-3px)}
        .btn-sm{padding:.6rem 1.25rem;font-size:.85rem;border-radius:12px}

        /* Feature Grid */
        .features-section{padding:4rem 2rem}
        .section-header{text-align:center;margin-bottom:3rem}
        .section-header h2{font-family:'Playfair Display',serif;font-size:2.5rem;font-weight:700;margin-bottom:1rem;letter-spacing:-0.01em}
        .section-header p{color:var(--text-secondary);font-size:1.05rem;max-width:580px;margin:0 auto;line-height:1.7}
        .features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;max-width:1200px;margin:0 auto}
        .feature-card{background:var(--bg-card);border-radius:24px;padding:2rem;border:1px solid var(--border);transition:all .3s;position:relative;overflow:hidden}
        .feature-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--accent),var(--accent-secondary));transform:scaleX(0);transition:transform .3s}
        .feature-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}.feature-card:hover::before{transform:scaleX(1)}
        .feature-icon{width:60px;height:60px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:1.75rem;margin-bottom:1.25rem;background:linear-gradient(135deg,var(--accent-glow),transparent)}
        .feature-card h3{font-size:1.25rem;font-weight:600;margin-bottom:.75rem}
        .feature-card p{color:var(--text-secondary);line-height:1.6}

        /* Stats */
        .stats-section{padding:4rem 2rem;background:var(--bg-card);border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
        .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;max-width:1000px;margin:0 auto;text-align:center}
        .stat-number{font-family:'Poppins',sans-serif;font-size:3rem;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .stat-label{color:var(--text-secondary);font-size:1rem;margin-top:.5rem}

        /* Page Header */
        .page-header{text-align:center;margin-bottom:2.5rem;padding:2.5rem 0}
        .page-header h1{font-family:'Playfair Display',serif;font-size:2.5rem;font-weight:700;margin-bottom:.75rem;letter-spacing:-0.01em}
        .page-header p{color:var(--text-secondary);font-size:1.05rem;line-height:1.6}

        /* Input Card */
        .input-card{background:var(--bg-card);border-radius:24px;padding:2rem;border:1px solid var(--border);box-shadow:var(--shadow);margin-bottom:2rem}
        .input-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;flex-wrap:wrap;gap:1rem}
        .input-header h3{font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:.5rem}
        .sample-buttons{display:flex;gap:.5rem;flex-wrap:wrap}
        .sample-btn{padding:.5rem 1rem;border:1px solid var(--border);border-radius:50px;background:var(--bg-surface);color:var(--text-secondary);font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s}
        .sample-btn:hover{background:var(--accent);color:white;border-color:var(--accent)}

        /* File Drop */
        .file-drop-zone{border:2px dashed var(--border);border-radius:16px;padding:1.25rem;text-align:center;cursor:pointer;transition:all .3s;margin-bottom:1rem}
        .file-drop-zone:hover,.file-drop-zone.dragover{border-color:var(--accent);background:var(--accent-glow)}
        .file-drop-icon{font-size:1.75rem;margin-bottom:.25rem}.file-drop-text{color:var(--text-secondary);font-size:.85rem}.file-drop-text strong{color:var(--accent)}

        /* Textarea */
        textarea{width:100%;min-height:200px;padding:1.25rem;border:2px solid var(--border);border-radius:16px;font-size:1rem;font-family:inherit;line-height:1.7;resize:vertical;background:var(--bg-surface);color:var(--text-primary);transition:all .3s}
        textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px var(--accent-glow)}
        textarea::placeholder{color:var(--text-muted)}
        textarea.invalid{border-color:var(--high-bar);box-shadow:0 0 0 4px rgba(239,68,68,.2);animation:shake .4s ease}
        .textarea-footer{display:flex;justify-content:space-between;align-items:center;margin-top:.5rem;padding:0 .25rem}
        .word-count{font-size:.85rem;color:var(--text-muted)}.word-count.warning{color:var(--medium-text);font-weight:600}.word-count.good{color:var(--low-text)}
        .input-hint{font-size:.8rem;color:var(--text-muted);display:flex;align-items:center;gap:.35rem}
        .input-hint kbd{background:var(--bg-surface);border:1px solid var(--border);padding:.1rem .4rem;border-radius:4px;font-size:.75rem;font-family:inherit}

        /* Action Button */
        .analyze-btn{width:100%;padding:1.25rem 2rem;margin-top:1rem;background:linear-gradient(135deg,var(--accent),var(--accent-secondary));color:white;border:none;border-radius:16px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:.75rem}
        .analyze-btn:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 10px 30px var(--accent-glow)}
        .analyze-btn:disabled{opacity:.7;cursor:not-allowed}
        .spinner{width:24px;height:24px;border:3px solid rgba(255,255,255,.3);border-top-color:white;border-radius:50%;animation:spin .8s linear infinite}

        /* Results */
        .results-section{display:none}.results-section.visible{display:block;animation:fadeIn .5s ease-out}
        .export-bar{display:flex;justify-content:flex-end;gap:.5rem;margin-bottom:1.5rem;flex-wrap:wrap}
        .export-btn{display:inline-flex;align-items:center;gap:.4rem;padding:.6rem 1rem;border:1px solid var(--border);border-radius:12px;background:var(--bg-card);color:var(--text-secondary);font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s}
        .export-btn:hover{border-color:var(--accent);color:var(--accent);transform:translateY(-2px);box-shadow:var(--shadow)}
        .meta-bar{display:flex;justify-content:center;gap:1.5rem;margin-bottom:1rem;flex-wrap:wrap;font-size:.85rem;color:var(--text-muted)}
        .meta-bar span{display:flex;align-items:center;gap:.3rem}

        /* Score Card */
        .score-card{background:var(--bg-card);border-radius:24px;padding:3rem;text-align:center;border:1px solid var(--border);box-shadow:var(--shadow-lg);margin-bottom:2rem;position:relative;overflow:hidden}
        .score-card::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,var(--low-bar),var(--medium-bar),var(--high-bar))}
        .score-number{font-family:'Poppins',sans-serif;font-size:6rem;font-weight:800;line-height:1}
        .score-number.low{color:var(--low-text)}.score-number.medium{color:var(--medium-text)}.score-number.high{color:var(--high-text)}
        .score-label{font-size:1.1rem;color:var(--text-secondary);margin-top:.5rem}
        .classification-badge{display:inline-flex;align-items:center;gap:.75rem;padding:1rem 2rem;border-radius:50px;font-size:1.25rem;font-weight:700;margin:1.5rem 0}
        .classification-badge.low{background:var(--low-bg);color:var(--low-text)}.classification-badge.medium{background:var(--medium-bg);color:var(--medium-text)}.classification-badge.high{background:var(--high-bg);color:var(--high-text)}
        .interpretation-box{background:var(--bg-surface);border-radius:16px;padding:1.5rem;text-align:left}
        .interpretation-box h4{font-size:1.1rem;margin-bottom:.75rem}.interpretation-box p{color:var(--text-secondary);line-height:1.7}

        /* Warnings */
        .warnings-list{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1.5rem}
        .warning-item{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:var(--medium-bg);color:var(--medium-text);border-radius:12px;font-size:.9rem;font-weight:500}

        /* Results Grid */
        .results-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:1.5rem;margin-bottom:2rem}

        /* Collapsible Card */
        .result-card{background:var(--bg-card);border-radius:20px;padding:0;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}
        .result-card-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 1.75rem;cursor:pointer;transition:background .2s;user-select:none}
        .result-card-header:hover{background:var(--bg-surface)}
        .result-card-header h3{font-size:1.15rem;font-weight:600;display:flex;align-items:center;gap:.5rem;margin:0}
        .collapse-icon{font-size:1.25rem;transition:transform .3s;color:var(--text-muted)}
        .result-card.collapsed .collapse-icon{transform:rotate(-90deg)}.result-card.collapsed .result-card-body{display:none}
        .result-card-body{padding:0 1.75rem 1.75rem}

        /* Feature Chart */
        .feature-chart{display:flex;flex-direction:column;gap:1.25rem}
        .feature-item{opacity:0;animation:slideInLeft .5s ease-out forwards}
        .feature-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}
        .feature-name{font-weight:600;font-size:.95rem;display:flex;align-items:center;gap:.4rem}
        .feature-value{font-weight:700;font-size:1rem;padding:.25rem .75rem;border-radius:50px}
        .feature-value.low{background:var(--low-bg);color:var(--low-text)}.feature-value.medium{background:var(--medium-bg);color:var(--medium-text)}.feature-value.high{background:var(--high-bg);color:var(--high-text)}
        .feature-bar-container{height:12px;background:var(--bg-surface);border-radius:6px;overflow:hidden}
        .feature-bar{height:100%;border-radius:6px;animation:barGrow 1s ease-out forwards}
        .feature-bar.low{background:linear-gradient(90deg,#059669,#34d399)}.feature-bar.medium{background:linear-gradient(90deg,#d97706,#f59e0b)}.feature-bar.high{background:linear-gradient(90deg,#dc2626,#ef4444)}
        .feature-explanation{font-size:.85rem;color:var(--text-secondary);margin-top:.5rem;padding-left:.75rem;border-left:2px solid var(--border)}

        /* Tooltip */
        .tt{position:relative;cursor:help;color:var(--text-muted);font-size:.85rem}
        .tt::after{content:attr(data-tip);position:absolute;bottom:120%;left:50%;transform:translateX(-50%);background:var(--text-primary);color:var(--bg-card);padding:.5rem .85rem;border-radius:8px;font-size:.78rem;white-space:nowrap;opacity:0;pointer-events:none;transition:all .2s;font-weight:400;z-index:100}
        .tt:hover::after{opacity:1;bottom:130%}

        /* Study Plan */
        .study-plan-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
        .plan-item{background:var(--bg-surface);padding:1.25rem;border-radius:16px;text-align:center;transition:all .2s}
        .plan-item:hover{transform:scale(1.03)}
        .plan-icon{font-size:1.5rem;margin-bottom:.5rem}
        .plan-value{font-family:'Poppins',sans-serif;font-size:1.75rem;font-weight:700;color:var(--accent)}
        .plan-label{font-size:.85rem;color:var(--text-secondary);margin-top:.25rem}
        .tips-list{display:flex;flex-direction:column;gap:.75rem}
        .tip-item{display:flex;align-items:flex-start;gap:.75rem;padding:1rem 1.25rem;background:var(--bg-surface);border-radius:12px;transition:all .2s}
        .tip-item:hover{background:var(--accent);color:white;transform:translateX(8px)}
        .tip-icon{font-size:1.25rem;flex-shrink:0}

        /* Section Analysis */
        .sections-list{display:flex;flex-direction:column;gap:.75rem}
        .section-item{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:var(--bg-surface);border-radius:12px;transition:all .2s}
        .section-item:hover{transform:translateX(4px)}
        .section-index{font-family:'Poppins',sans-serif;font-weight:700;font-size:1.1rem;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:10px;flex-shrink:0}
        .section-index.low{background:var(--low-bg);color:var(--low-text)}.section-index.medium{background:var(--medium-bg);color:var(--medium-text)}.section-index.high{background:var(--high-bg);color:var(--high-text)}
        .section-details{flex:1;min-width:0}
        .section-preview{font-size:.9rem;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .section-meta{display:flex;gap:1rem;margin-top:.35rem;font-size:.8rem;color:var(--text-muted)}
        .section-bar{width:80px;height:8px;background:var(--bg-card);border-radius:4px;overflow:hidden;flex-shrink:0}
        .section-bar-fill{height:100%;border-radius:4px}

        /* Simplify */
        .simplify-output{display:none}.simplify-output.visible{display:block;animation:fadeIn .5s ease-out}
        .simplify-comparison{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}
        .comparison-card{border-radius:20px;padding:2rem;border-width:2px;border-style:solid}
        .comparison-card.original{background:var(--bg-surface);border-color:var(--border)}
        .comparison-card.simplified{background:linear-gradient(135deg,var(--low-bg),var(--bg-surface));border-color:var(--low-text)}
        .comparison-card h3{font-size:1.1rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
        .comparison-card .text-content{font-size:1rem;line-height:1.8;color:var(--text-primary)}
        .copy-btn{background:var(--bg-card);border:1px solid var(--border);border-radius:8px;padding:.3rem .6rem;font-size:.75rem;cursor:pointer;transition:all .2s;margin-left:auto;display:flex;align-items:center;gap:.25rem;color:var(--text-secondary)}
        .copy-btn:hover{border-color:var(--accent);color:var(--accent)}
        .copy-btn.copied{background:var(--low-bg);color:var(--low-text);border-color:var(--low-text)}
        .word-changes-section{margin-top:1.5rem}.word-changes-section h4{font-size:.95rem;color:var(--text-secondary);margin-bottom:1rem}
        .word-changes-list{display:flex;flex-wrap:wrap;gap:.5rem}
        .word-change-item{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-card);border-radius:50px;font-size:.9rem;border:1px solid var(--border);transition:all .2s}
        .word-change-item:hover{transform:scale(1.05);box-shadow:var(--shadow)}
        .word-old{color:var(--high-text);text-decoration:line-through}.word-arrow{color:var(--text-muted)}.word-new{color:var(--low-text);font-weight:600}
        .simplify-stats-bar{display:flex;gap:1.5rem;justify-content:center;flex-wrap:wrap;margin-bottom:1.5rem}
        .simplify-stat{text-align:center;padding:1rem 1.5rem;background:var(--bg-card);border-radius:16px;border:1px solid var(--border)}
        .simplify-stat-value{font-family:'Poppins',sans-serif;font-size:1.5rem;font-weight:700;color:var(--accent)}
        .simplify-stat-label{font-size:.8rem;color:var(--text-secondary);margin-top:.25rem}

        /* Reviews */
        .reviews-carousel{position:relative;overflow:hidden;margin:2rem 0}
        .reviews-track{display:flex;gap:1.5rem;transition:transform .5s ease}
        .review-card{flex:0 0 calc(33.333% - 1rem);background:var(--bg-card);border-radius:24px;padding:2rem;border:1px solid var(--border);box-shadow:var(--shadow);transition:all .3s}
        .review-card:hover{transform:translateY(-3px);box-shadow:var(--shadow-lg)}
        .review-stars{display:flex;gap:.25rem;margin-bottom:1rem}
        .star{color:#c9a84c;font-size:1.25rem}.star.empty{color:var(--border)}
        .review-text{font-family:'Playfair Display',serif;font-size:1.05rem;line-height:1.8;color:var(--text-primary);margin-bottom:1.5rem;font-style:italic}
        .review-author{display:flex;align-items:center;gap:1rem}
        .review-avatar{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-secondary));display:flex;align-items:center;justify-content:center;font-size:1.25rem;color:white;font-weight:700}
        .review-info h4{font-size:1rem;font-weight:600}.review-info p{font-size:.85rem;color:var(--text-secondary)}
        .carousel-controls{display:flex;justify-content:center;gap:1rem;margin-top:2rem;align-items:center}
        .carousel-btn{width:50px;height:50px;border-radius:50%;background:var(--bg-card);border:1px solid var(--border);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.25rem;transition:all .2s;color:var(--text-primary)}
        .carousel-btn:hover{background:var(--accent);color:white;border-color:var(--accent)}
        .carousel-dots{display:flex;gap:.5rem}
        .carousel-dot{width:10px;height:10px;border-radius:50%;background:var(--border);cursor:pointer;transition:all .3s;border:none}
        .carousel-dot.active{background:var(--accent);width:28px;border-radius:5px}
        .reviews-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem;max-width:600px;margin:3rem auto;text-align:center}

        /* About */
        .about-card{background:var(--bg-card);border-radius:24px;padding:3rem;border:1px solid var(--border);box-shadow:var(--shadow);margin-bottom:2rem}
        .about-card h2{font-family:'Playfair Display',serif;font-size:2rem;margin-bottom:1.5rem;letter-spacing:-0.01em}
        .about-card p{color:var(--text-secondary);line-height:1.8;margin-bottom:1rem}
        .about-card ul{color:var(--text-secondary);line-height:2;margin-left:1.5rem}
        .about-links{display:flex;gap:1rem;margin-top:2rem}
        .about-link{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:12px;text-decoration:none;font-weight:500;transition:all .2s}
        .about-link.github{background:#24292e;color:white}.about-link.github:hover{background:#1a1e22;transform:translateY(-2px)}
        .about-link.linkedin{background:#0077b5;color:white}.about-link.linkedin:hover{background:#006699;transform:translateY(-2px)}
        .tech-stack{display:flex;flex-wrap:wrap;gap:.75rem;margin-top:1rem}
        .tech-tag{padding:.5rem 1rem;background:var(--bg-surface);border-radius:50px;font-size:.9rem;color:var(--text-secondary);border:1px solid var(--border)}

        /* Error State */
        .error-card{background:var(--bg-card);border-radius:20px;padding:3rem;text-align:center;border:2px solid var(--high-bar);margin:2rem 0}
        .error-icon{font-size:3rem;margin-bottom:1rem}.error-title{font-family:'Poppins',sans-serif;font-size:1.3rem;font-weight:700;color:var(--high-text);margin-bottom:.5rem}
        .error-message{color:var(--text-secondary);margin-bottom:1.5rem}

        /* Footer */
        .footer{background:var(--bg-card);border-top:1px solid var(--border);padding:3rem 2rem;margin-top:4rem}
        .footer-content{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
        .footer-logo{font-family:'Poppins',sans-serif;font-weight:700;font-size:1.25rem;background:linear-gradient(135deg,var(--accent),var(--accent-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .footer-text{color:var(--text-muted);font-size:.9rem}

        /* Responsive */
        @media(max-width:1024px){.review-card{flex:0 0 calc(50% - .75rem)}}
        @media(max-width:768px){
            .nav-links{display:none;position:absolute;top:100%;left:0;right:0;background:var(--bg-nav);flex-direction:column;padding:1rem;border-bottom:1px solid var(--border)}
            .nav-links.open{display:flex}.mobile-menu-btn{display:block}
            .hero h1{font-size:2.5rem}.results-grid{grid-template-columns:1fr}
            .study-plan-grid{grid-template-columns:repeat(2,1fr)}.review-card{flex:0 0 100%}.score-number{font-size:4rem}
            .simplify-comparison{grid-template-columns:1fr}
        }
        @media(max-width:480px){.container{padding:1rem}.hero h1{font-size:2rem}.study-plan-grid{grid-template-columns:1fr}.btn{width:100%;justify-content:center}.export-bar{justify-content:center}}
    </style>
</head>
<body>
    <div class="toast-container" id="toastContainer"></div>
    <div class="offline-banner" id="offlineBanner">‚ö° You're offline ‚Äî analysis requires an internet connection</div>

    <!-- Progress Overlay -->
    <div class="progress-overlay" id="progressOverlay">
        <div class="progress-card">
            <div class="progress-icon" id="progressIcon">üß†</div>
            <div class="progress-title" id="progressTitle">Analyzing Text...</div>
            <div class="progress-subtitle" id="progressSubtitle">Running NLP analysis on your text</div>
            <div class="progress-bar-track"><div class="progress-bar-fill" id="progressBarFill" style="width:0%"></div></div>
            <div class="progress-steps" id="progressSteps">
                <div class="progress-step" id="step-parse"><span class="progress-step-dot"></span> Parsing</div>
                <div class="progress-step" id="step-features"><span class="progress-step-dot"></span> Features</div>
                <div class="progress-step" id="step-score"><span class="progress-step-dot"></span> Scoring</div>
                <div class="progress-step" id="step-plan"><span class="progress-step-dot"></span> Planning</div>
            </div>
        </div>
    </div>

    <!-- Nav -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a class="nav-logo" onclick="showPage('home')"><span class="nav-logo-icon">üß†</span><span>CognitiveLoad AI</span></a>
            <div class="nav-links" id="navLinks">
                <a class="nav-link active" data-page="home" onclick="showPage('home')">Home</a>
                <a class="nav-link" data-page="analyze" onclick="showPage('analyze')">Analyze Text</a>
                <a class="nav-link" data-page="simplify" onclick="showPage('simplify')">Simplify Text</a>
                <a class="nav-link" data-page="reviews" onclick="showPage('reviews')">Reviews</a>
                <a class="nav-link" data-page="about" onclick="showPage('about')">About</a>
            </div>
            <div class="nav-actions">
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme (T)"><span id="themeIcon">üåô</span></button>
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
            </div>
        </div>
    </nav>

    <!-- ========== HOME ========== -->
    <div class="page active" id="page-home">
        <section class="hero">
            <h1>Study Smarter with<br><span class="gradient-text">CognitiveLoad AI</span></h1>
            <p class="hero-subtitle">Understand how hard your study material is and get personalized recommendations to learn more effectively.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="showPage('analyze')"><span>üîç</span> Analyze Text</button>
                <button class="btn btn-secondary" onclick="showPage('simplify')"><span>‚ú®</span> Simplify Text</button>
            </div>
        </section>
        <section class="features-section">
            <div class="section-header"><h2>Powerful Features</h2><p>Everything you need to optimize your study sessions</p></div>
            <div class="features-grid">
                <div class="feature-card"><div class="feature-icon">üìä</div><h3>Cognitive Load Score</h3><p>Get a 0-100 difficulty score based on sentence length, vocabulary complexity, and abstract concept density.</p></div>
                <div class="feature-card"><div class="feature-icon">üìà</div><h3>Feature Breakdown</h3><p>Visual charts showing exactly what makes your text difficult with color-coded metrics and tooltips.</p></div>
                <div class="feature-card"><div class="feature-icon">üìÖ</div><h3>Study Planning</h3><p>Personalized recommendations for session length, breaks, and how to chunk your material.</p></div>
                <div class="feature-card"><div class="feature-icon">‚ú®</div><h3>Text Simplification</h3><p>Transform complex academic text into simpler, easier-to-understand versions with 60+ word replacements.</p></div>
                <div class="feature-card"><div class="feature-icon">üéØ</div><h3>Section Analysis</h3><p>Identify the hardest parts of your material so you know where to focus your energy.</p></div>
                <div class="feature-card"><div class="feature-icon">üì•</div><h3>Export Results</h3><p>Download your analysis as JSON, CSV, or plain text. Upload .txt files directly for analysis.</p></div>
            </div>
        </section>
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-item"><div class="stat-number">5+</div><div class="stat-label">NLP Features</div></div>
                <div class="stat-item"><div class="stat-number">100%</div><div class="stat-label">Free to Use</div></div>
                <div class="stat-item"><div class="stat-number">0</div><div class="stat-label">Data Stored</div></div>
                <div class="stat-item"><div class="stat-number">‚àû</div><div class="stat-label">Texts Analyzed</div></div>
            </div>
        </section>
        <section class="features-section" style="text-align:center">
            <h2 style="font-family:'Playfair Display',serif;font-size:2rem;margin-bottom:1rem;letter-spacing:-0.01em">Ready to Study Smarter?</h2>
            <p style="color:var(--text-secondary);margin-bottom:2rem">Paste your text and get insights in seconds</p>
            <button class="btn btn-primary animate-pulse" onclick="showPage('analyze')" style="font-size:1.2rem;padding:1.25rem 3rem">üöÄ Get Started Now</button>
        </section>
    </div>

    <!-- ========== ANALYZE ========== -->
    <div class="page" id="page-analyze">
        <div class="container" style="max-width:1000px">
            <div class="page-header"><h1>üîç Cognitive Load Analyzer</h1><p>Paste your study material or upload a text file</p></div>
            <div class="input-card">
                <div class="input-header">
                    <h3>üìÑ Your Text</h3>
                    <div class="sample-buttons">
                        <button class="sample-btn" onclick="loadSample('biology')">üß¨ Biology</button>
                        <button class="sample-btn" onclick="loadSample('physics')">‚öõÔ∏è Physics</button>
                        <button class="sample-btn" onclick="loadSample('history')">üìú History</button>
                        <button class="sample-btn" onclick="loadSample('simple')">üìñ Simple</button>
                    </div>
                </div>
                <div class="file-drop-zone" id="analyzeDropZone" onclick="document.getElementById('fileInput').click()">
                    <div class="file-drop-icon">üìÅ</div>
                    <div class="file-drop-text">Drop a <strong>.txt file</strong> here or click to browse</div>
                </div>
                <input type="file" id="fileInput" accept=".txt,.md" style="display:none" onchange="handleFileUpload(event,'analyzeInput')">
                <div class="textarea-container">
                    <textarea id="analyzeInput" placeholder="Paste your textbook content, lecture notes, or any study material here...

üí° Tip: More text = more accurate analysis!" oninput="updateWordCount('analyzeInput','analyzeWordCount')"></textarea>
                </div>
                <div class="textarea-footer">
                    <span class="word-count" id="analyzeWordCount">0 words</span>
                    <span class="input-hint"><kbd>Ctrl</kbd>+<kbd>Enter</kbd> to analyze</span>
                </div>
                <button class="analyze-btn" id="analyzeBtn" onclick="analyzeText()">
                    <span id="analyzeBtnText">üîç Analyze My Text</span>
                    <div class="spinner" id="analyzeSpinner" style="display:none"></div>
                </button>
            </div>
            <div id="analyzeError" style="display:none"></div>
            <div class="results-section" id="analyzeResults">
                <div class="export-bar">
                    <button class="export-btn" onclick="exportResults('json')">üìã JSON</button>
                    <button class="export-btn" onclick="exportResults('csv')">üìä CSV</button>
                    <button class="export-btn" onclick="exportResults('txt')">üìÑ TXT</button>
                </div>
                <div class="meta-bar" id="metaBar"></div>
                <div class="warnings-list" id="warningsList"></div>
                <div class="score-card">
                    <div class="score-number" id="scoreNumber">0</div>
                    <div class="score-label">out of 100 difficulty</div>
                    <div class="classification-badge" id="classificationBadge"><span id="classificationEmoji">üìö</span><span id="classificationText">Loading...</span></div>
                    <div class="interpretation-box"><h4 id="interpretationTitle">Analysis Complete</h4><p id="interpretationText"></p></div>
                </div>
                <div class="results-grid">
                    <div class="result-card" id="featuresCard">
                        <div class="result-card-header" onclick="toggleCard('featuresCard')"><h3>üìä What Makes It Hard</h3><span class="collapse-icon">‚ñº</span></div>
                        <div class="result-card-body"><div class="feature-chart" id="featureChart"></div></div>
                    </div>
                    <div class="result-card" id="planCard">
                        <div class="result-card-header" onclick="toggleCard('planCard')"><h3>üìÖ Study Plan</h3><span class="collapse-icon">‚ñº</span></div>
                        <div class="result-card-body"><div class="study-plan-grid" id="studyPlan"></div></div>
                    </div>
                </div>
                <div class="result-card" id="tipsCard" style="margin-bottom:2rem">
                    <div class="result-card-header" onclick="toggleCard('tipsCard')"><h3>üí° Study Tips</h3><span class="collapse-icon">‚ñº</span></div>
                    <div class="result-card-body"><div class="tips-list" id="tipsList"></div></div>
                </div>
                <div class="result-card" id="sectionsCard" style="margin-bottom:2rem">
                    <div class="result-card-header" onclick="toggleCard('sectionsCard')"><h3>üéØ Section Analysis</h3><span class="collapse-icon">‚ñº</span></div>
                    <div class="result-card-body"><div class="sections-list" id="sectionsList"></div></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== SIMPLIFY ========== -->
    <div class="page" id="page-simplify">
        <div class="container" style="max-width:1000px">
            <div class="page-header"><h1>‚ú® Text Simplifier</h1><p>Transform complex text into easy-to-read language</p></div>
            <div class="input-card">
                <div class="input-header">
                    <h3>üìÑ Original Text</h3>
                    <div class="sample-buttons">
                        <button class="sample-btn" onclick="loadSimpleSample('academic')">üéì Academic</button>
                        <button class="sample-btn" onclick="loadSimpleSample('science')">üî¨ Science</button>
                    </div>
                </div>
                <div class="file-drop-zone" id="simplifyDropZone" onclick="document.getElementById('simplifyFileInput').click()">
                    <div class="file-drop-icon">üìÅ</div>
                    <div class="file-drop-text">Drop a <strong>.txt file</strong> here or click to browse</div>
                </div>
                <input type="file" id="simplifyFileInput" accept=".txt,.md" style="display:none" onchange="handleFileUpload(event,'simplifyInput')">
                <div class="textarea-container">
                    <textarea id="simplifyInput" placeholder="Paste complex academic text here and we'll make it easier to understand...

üí° Works best with textbook paragraphs or lecture notes!" oninput="updateWordCount('simplifyInput','simplifyWordCount')"></textarea>
                </div>
                <div class="textarea-footer">
                    <span class="word-count" id="simplifyWordCount">0 words</span>
                    <span class="input-hint"><kbd>Ctrl</kbd>+<kbd>Enter</kbd> to simplify</span>
                </div>
                <button class="analyze-btn" id="simplifyBtn" onclick="simplifyText()">
                    <span id="simplifyBtnText">‚ú® Simplify Text</span>
                    <div class="spinner" id="simplifySpinner" style="display:none"></div>
                </button>
            </div>
            <div id="simplifyError" style="display:none"></div>
            <div class="simplify-output" id="simplifyOutput">
                <div class="simplify-stats-bar" id="simplifyStatsBar"></div>
                <div class="simplify-comparison">
                    <div class="comparison-card original"><h3>üìÑ Original</h3><div class="text-content" id="originalText"></div></div>
                    <div class="comparison-card simplified"><h3 style="display:flex;align-items:center">‚ú® Simplified <button class="copy-btn" id="copySimplifiedBtn" onclick="copySimplified()">üìã Copy</button></h3><div class="text-content" id="simplifiedText"></div></div>
                </div>
                <div class="word-changes-section" id="wordChangesSection">
                    <h4>üîÑ Words Simplified</h4>
                    <div class="word-changes-list" id="wordChangesList"></div>
                </div>
                <div class="export-bar" style="margin-top:1.5rem"><button class="export-btn" onclick="exportSimplified()">üìÑ Download Simplified Text</button></div>
            </div>
        </div>
    </div>

    <!-- ========== REVIEWS ========== -->
    <div class="page" id="page-reviews">
        <div class="container" style="max-width:1200px">
            <div class="page-header"><h1>‚≠ê Student Reviews</h1><p>See what students are saying about CognitiveLoad AI</p></div>
            <div class="reviews-carousel">
                <div class="reviews-track" id="reviewsTrack">
                    <div class="review-card"><div class="review-stars"><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span></div><p class="review-text">"This helped me pass my IGCSEs! I used it to analyze my revision notes and it told me exactly which sections needed more time. Game changer!"</p><div class="review-author"><div class="review-avatar">S</div><div class="review-info"><h4>Sarah M.</h4><p>IGCSE Student, UK</p></div></div></div>
                    <div class="review-card"><div class="review-stars"><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span></div><p class="review-text">"Made my revision much easier and faster. The text simplifier is incredible ‚Äî it turns complicated biology text into something I can actually understand."</p><div class="review-author"><div class="review-avatar">J</div><div class="review-info"><h4>James K.</h4><p>A-Level Student, UK</p></div></div></div>
                    <div class="review-card"><div class="review-stars"><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star empty">‚òÜ</span></div><p class="review-text">"Finally understand why some textbooks feel so hard to read! The breakdown charts helped me adjust my study approach completely."</p><div class="review-author"><div class="review-avatar">A</div><div class="review-info"><h4>Aisha R.</h4><p>University Freshman, Canada</p></div></div></div>
                    <div class="review-card"><div class="review-stars"><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span></div><p class="review-text">"I'm a teacher and I use this to check if my materials are appropriate for my students. Helps me identify when I'm making things too complex."</p><div class="review-author"><div class="review-avatar">M</div><div class="review-info"><h4>Mr. Thompson</h4><p>High School Teacher, USA</p></div></div></div>
                    <div class="review-card"><div class="review-stars"><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span></div><p class="review-text">"The study planning feature is amazing! It tells me exactly how long to study and when to take breaks. My grades went up significantly."</p><div class="review-author"><div class="review-avatar">L</div><div class="review-info"><h4>Lisa C.</h4><p>Medical Student, Australia</p></div></div></div>
                    <div class="review-card"><div class="review-stars"><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star empty">‚òÜ</span></div><p class="review-text">"Great for non-native English speakers. The text simplifier helps me understand difficult academic papers. Export feature is a nice bonus!"</p><div class="review-author"><div class="review-avatar">H</div><div class="review-info"><h4>Hans W.</h4><p>PhD Candidate, Germany</p></div></div></div>
                </div>
            </div>
            <div class="carousel-controls">
                <button class="carousel-btn" onclick="moveCarousel(-1)">‚Üê</button>
                <div class="carousel-dots" id="carouselDots"></div>
                <button class="carousel-btn" onclick="moveCarousel(1)">‚Üí</button>
            </div>
            <div class="reviews-stats">
                <div class="stat-item"><div class="stat-number">4.8</div><div class="stat-label">Average Rating</div></div>
                <div class="stat-item"><div class="stat-number">500+</div><div class="stat-label">Happy Students</div></div>
                <div class="stat-item"><div class="stat-number">15+</div><div class="stat-label">Countries</div></div>
            </div>
        </div>
    </div>

    <!-- ========== ABOUT ========== -->
    <div class="page" id="page-about">
        <div class="container" style="max-width:800px">
            <div class="page-header"><h1>‚ÑπÔ∏è About CognitiveLoad AI</h1><p>Helping students learn smarter, not harder</p></div>
            <div class="about-card"><h2>Our Mission</h2><p>CognitiveLoad AI was built with a simple goal: help students understand why some study materials feel harder than others and what they can do about it.</p><p>Using natural language processing (NLP), we analyze text for factors that contribute to cognitive load ‚Äî how much mental effort is required to understand something.</p><p><strong>We believe in ethical, transparent AI.</strong> That's why we show you exactly what factors contribute to your score.</p></div>
            <div class="about-card"><h2>How It Works</h2><p>Our v3.0 analysis engine examines five key features:</p><ul><li><strong>Sentence Length</strong> ‚Äî Longer sentences require more working memory</li><li><strong>Vocabulary Complexity</strong> ‚Äî Rare/technical words increase cognitive load</li><li><strong>Abstract Density</strong> ‚Äî Abstract concepts are harder to visualize</li><li><strong>Concept Repetition</strong> ‚Äî Repetition helps reinforce learning (reduces load)</li><li><strong>Readability</strong> ‚Äî Overall text difficulty using Flesch-based metrics</li></ul><p style="margin-top:1rem">Edge cases like code blocks, all-caps text, number-heavy content, and repetitive text are automatically detected and flagged with warnings.</p></div>
            <div class="about-card"><h2>Technology Stack</h2><div class="tech-stack"><span class="tech-tag">Python 3</span><span class="tech-tag">Pure NLP (no dependencies)</span><span class="tech-tag">Vercel Serverless</span><span class="tech-tag">HTML / CSS / JS</span><span class="tech-tag">LRU Cache</span><span class="tech-tag">REST API</span></div></div>
            <div class="about-card"><h2>Connect With Us</h2><p>CognitiveLoad AI is open source:</p><div class="about-links"><a href="https://github.com/thehans-mwe/CognitiveLoadAI" target="_blank" class="about-link github"><span>‚å®Ô∏è</span> GitHub</a><a href="https://linkedin.com" target="_blank" class="about-link linkedin"><span>üíº</span> LinkedIn</a></div></div>
            <div class="about-card" style="text-align:center;background:linear-gradient(135deg,var(--accent-glow),transparent)"><h2>Privacy First</h2><p style="font-size:1.1rem">üîí <strong>No accounts required</strong><br>üóëÔ∏è <strong>No data stored</strong><br>üëÅÔ∏è <strong>No tracking</strong></p></div>
        </div>
    </div>

    <footer class="footer"><div class="footer-content"><div class="footer-logo">üß† CognitiveLoad AI</div><div class="footer-text">¬© 2026 CognitiveLoad AI. All rights reserved.</div></div></footer>

    <script>
    /* =========== GLOBALS =========== */
    let lastAnalysisData = null, lastSimplifyData = null, carouselPosition = 0;
    const MAX_RETRIES = 2, RETRY_DELAY = 1500, API_TIMEOUT = 30000;

    const samples = {
        biology: `Photosynthesis is the process by which green plants and some other organisms use sunlight to synthesize nutrients from carbon dioxide and water. Photosynthesis in plants generally involves the green pigment chlorophyll and generates oxygen as a by-product. The process occurs primarily in the leaves, specifically in the chloroplasts. During the light-dependent reactions, water molecules are split, releasing oxygen and producing ATP and NADPH. The Calvin cycle then uses these energy carriers to fix carbon dioxide into glucose molecules.`,
        physics: `The Copenhagen interpretation of quantum mechanics posits that physical systems do not have definite properties prior to measurement. The act of measurement causes the wavefunction to collapse, transitioning from a superposition of states to a single eigenstate. This interpretation introduces fundamental indeterminacy into physics, challenging classical notions of determinism. Heisenberg's uncertainty principle further demonstrates that conjugate variables cannot be simultaneously known with arbitrary precision.`,
        history: `The Industrial Revolution began in Britain in the late 18th century. It was marked by a shift from manual labor to machine-based manufacturing. Key inventions included the steam engine, spinning jenny, and power loom. These innovations transformed textile production and sparked changes across many industries. The revolution led to urbanization as people moved from rural areas to factory towns seeking employment opportunities.`,
        simple: `Dogs are wonderful pets. They are loyal friends who love to play. Dogs need daily walks and exercise to stay healthy. Most dogs enjoy fetch and running around the park. They also need fresh water and nutritious food every day.`
    };
    const simplifySamples = {
        academic: `The epistemological ramifications of postmodernist philosophy necessitate a fundamental reconceptualization of traditional pedagogical methodologies. Educators must subsequently endeavor to facilitate the development of critical analytical competencies, utilizing interdisciplinary approaches that demonstrate the interconnectedness of disparate knowledge domains.`,
        science: `Mitochondrial oxidative phosphorylation constitutes the predominant mechanism for adenosine triphosphate biosynthesis in eukaryotic organisms. This process utilizes the electrochemical gradient established across the inner mitochondrial membrane to facilitate the phosphorylation of adenosine diphosphate.`
    };

    /* =========== TOAST =========== */
    function showToast(type, title, message, duration = 4000) {
        const c = document.getElementById('toastContainer');
        const icons = { success: '‚úÖ', error: '‚ùå', warning: '‚ö†Ô∏è', info: '‚ÑπÔ∏è' };
        const t = document.createElement('div');
        t.className = `toast ${type}`;
        t.innerHTML = `<span class="toast-icon">${icons[type]||'‚ÑπÔ∏è'}</span><div class="toast-body"><div class="toast-title">${title}</div><div class="toast-message">${message}</div></div><button class="toast-close" onclick="dismissToast(this.parentElement)">‚úï</button><div class="toast-bar" style="width:100%"></div>`;
        c.appendChild(t);
        const bar = t.querySelector('.toast-bar');
        bar.style.transitionDuration = duration + 'ms';
        requestAnimationFrame(() => { bar.style.width = '0%'; });
        setTimeout(() => dismissToast(t), duration);
    }
    function dismissToast(t) { if (!t || t.classList.contains('removing')) return; t.classList.add('removing'); setTimeout(() => t.remove(), 300); }

    /* =========== PROGRESS =========== */
    function showProgress(title, subtitle) {
        document.getElementById('progressTitle').textContent = title;
        document.getElementById('progressSubtitle').textContent = subtitle;
        document.getElementById('progressBarFill').style.width = '0%';
        document.querySelectorAll('.progress-step').forEach(s => s.classList.remove('active', 'done'));
        document.getElementById('progressOverlay').classList.add('active');
    }
    function updateProgress(pct, stepId) {
        document.getElementById('progressBarFill').style.width = pct + '%';
        if (stepId) {
            const steps = ['step-parse', 'step-features', 'step-score', 'step-plan'];
            const idx = steps.indexOf(stepId);
            steps.forEach((s, i) => { const el = document.getElementById(s); if (i < idx) { el.classList.remove('active'); el.classList.add('done'); } else if (i === idx) { el.classList.add('active'); el.classList.remove('done'); } else { el.classList.remove('active', 'done'); } });
        }
    }
    function hideProgress() { document.getElementById('progressOverlay').classList.remove('active'); }

    /* =========== NETWORK =========== */
    window.addEventListener('online', () => { document.getElementById('offlineBanner').classList.remove('active'); showToast('success', 'Back Online', 'Connection restored'); });
    window.addEventListener('offline', () => { document.getElementById('offlineBanner').classList.add('active'); showToast('warning', 'Offline', 'Check your internet connection'); });

    /* =========== THEME =========== */
    function toggleTheme() {
        const newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        document.getElementById('themeIcon').textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        localStorage.setItem('theme', newTheme);
    }
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    document.getElementById('themeIcon').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

    /* =========== NAV =========== */
    function showPage(name) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(`page-${name}`).classList.add('active');
        document.querySelectorAll('.nav-link').forEach(l => { l.classList.remove('active'); if (l.dataset.page === name) l.classList.add('active'); });
        document.getElementById('navLinks').classList.remove('open');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        history.replaceState(null, '', `#${name}`);
    }
    function toggleMobileMenu() { document.getElementById('navLinks').classList.toggle('open'); }
    window.addEventListener('scroll', () => { document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50); });
    window.addEventListener('load', () => { const h = location.hash.slice(1); if (['home','analyze','simplify','reviews','about'].includes(h)) showPage(h); });

    /* =========== INPUT HELPERS =========== */
    function updateWordCount(inputId, countId) {
        const text = document.getElementById(inputId).value.trim();
        const words = text ? text.split(/\s+/).filter(w => w).length : 0;
        const el = document.getElementById(countId);
        el.textContent = `${words} word${words !== 1 ? 's' : ''}`;
        el.className = 'word-count' + (words > 0 && words < 10 ? ' warning' : words >= 10 ? ' good' : '');
        document.getElementById(inputId).classList.remove('invalid');
    }
    function loadSample(key) { document.getElementById('analyzeInput').value = samples[key]; updateWordCount('analyzeInput', 'analyzeWordCount'); showToast('info', 'Sample Loaded', `${key.charAt(0).toUpperCase() + key.slice(1)} sample loaded`); }
    function loadSimpleSample(key) { document.getElementById('simplifyInput').value = simplifySamples[key]; updateWordCount('simplifyInput', 'simplifyWordCount'); showToast('info', 'Sample Loaded', `${key.charAt(0).toUpperCase() + key.slice(1)} sample loaded`); }

    /* =========== FILE UPLOAD =========== */
    function handleFileUpload(event, targetId) {
        const file = event.target.files[0]; if (!file) return;
        if (!file.name.match(/\.(txt|md)$/i)) { showToast('error', 'Invalid File', 'Please upload a .txt or .md file'); return; }
        if (file.size > 500000) { showToast('warning', 'File Too Large', 'Please use files under 500 KB'); return; }
        const reader = new FileReader();
        reader.onload = e => { document.getElementById(targetId).value = e.target.result; updateWordCount(targetId, targetId === 'analyzeInput' ? 'analyzeWordCount' : 'simplifyWordCount'); showToast('success', 'File Loaded', `${file.name} loaded`); };
        reader.onerror = () => showToast('error', 'Read Error', 'Could not read file');
        reader.readAsText(file);
    }
    ['analyzeDropZone', 'simplifyDropZone'].forEach(id => {
        const zone = document.getElementById(id); if (!zone) return;
        const targetId = id === 'analyzeDropZone' ? 'analyzeInput' : 'simplifyInput';
        zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('dragover'); });
        zone.addEventListener('dragleave', () => zone.classList.remove('dragover'));
        zone.addEventListener('drop', e => { e.preventDefault(); zone.classList.remove('dragover'); if (e.dataTransfer.files[0]) handleFileUpload({ target: { files: [e.dataTransfer.files[0]] }}, targetId); });
    });

    /* =========== COLLAPSIBLE =========== */
    function toggleCard(cardId) { document.getElementById(cardId).classList.toggle('collapsed'); }

    /* =========== VALIDATION =========== */
    function validateInput(inputId, min) {
        const ta = document.getElementById(inputId), text = ta.value.trim();
        const words = text ? text.split(/\s+/).filter(w => w).length : 0;
        if (!text) { ta.classList.add('invalid'); showToast('warning', 'Empty Input', 'Please enter some text'); return false; }
        if (words < min) { ta.classList.add('invalid'); showToast('warning', 'Too Short', `Need at least ${min} words (got ${words})`); return false; }
        if (words > 10000) showToast('warning', 'Long Text', 'Very long text ‚Äî processing may take a moment');
        ta.classList.remove('invalid'); return true;
    }

    /* =========== API CALL WITH RETRY =========== */
    async function apiCall(text, retries = MAX_RETRIES) {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), API_TIMEOUT);
        try {
            const resp = await fetch('/api/analyze', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ text }), signal: controller.signal });
            clearTimeout(timeoutId);
            if (resp.status === 429) { const err = new Error('Rate limited'); err.code = 'RATE_LIMITED'; throw err; }
            if (resp.status === 413) { const err = new Error('Text too long'); err.code = 'TOO_LARGE'; throw err; }
            if (!resp.ok) { const d = await resp.json().catch(() => ({})); throw new Error(d.error || `Server error (${resp.status})`); }
            return await resp.json();
        } catch (error) {
            clearTimeout(timeoutId);
            if (error.name === 'AbortError') { const e = new Error('Request timed out'); e.code = 'TIMEOUT'; throw e; }
            if (error.code === 'TOO_LARGE') throw error;
            if (retries > 0 && !error.code) {
                showToast('info', 'Retrying...', `Attempt ${MAX_RETRIES - retries + 2} of ${MAX_RETRIES + 1}`);
                await new Promise(r => setTimeout(r, RETRY_DELAY));
                return apiCall(text, retries - 1);
            }
            throw error;
        }
    }

    /* =========== ANALYZE TEXT =========== */
    async function analyzeText() {
        if (!navigator.onLine) { showToast('error', 'Offline', 'Please check your internet connection'); return; }
        if (!validateInput('analyzeInput', 10)) return;
        const text = document.getElementById('analyzeInput').value.trim();
        const btn = document.getElementById('analyzeBtn');
        btn.disabled = true;
        document.getElementById('analyzeBtnText').textContent = 'Analyzing...';
        document.getElementById('analyzeSpinner').style.display = 'block';
        document.getElementById('analyzeError').style.display = 'none';
        document.getElementById('analyzeResults').classList.remove('visible');

        showProgress('Analyzing Your Text...', 'Running NLP analysis');
        let stepIdx = 0;
        const anim = setInterval(() => { const s = [{ p: 15, id: 'step-parse' }, { p: 45, id: 'step-features' }, { p: 70, id: 'step-score' }, { p: 90, id: 'step-plan' }]; if (stepIdx < s.length) updateProgress(s[stepIdx].p, s[stepIdx].id); stepIdx++; }, 500);

        try {
            const data = await apiCall(text);
            clearInterval(anim);
            lastAnalysisData = data;
            updateProgress(100, 'step-plan');
            await new Promise(r => setTimeout(r, 400));
            hideProgress();
            displayResults(data);
            const ms = data._meta?.processing_ms;
            showToast('success', 'Analysis Complete', `Score: ${Math.round(data.score)}/100 ‚Äî ${data.classification} load${ms ? ` (${ms}ms)` : ''}`);
        } catch (error) {
            clearInterval(anim); hideProgress();
            showErrorState('analyzeError', error.code === 'TIMEOUT' ? 'Request Timed Out' : 'Analysis Failed', error.message || 'Something went wrong', 'analyzeText');
            showToast('error', 'Error', error.message || 'Failed to analyze');
        } finally {
            btn.disabled = false; document.getElementById('analyzeBtnText').textContent = 'üîç Analyze My Text'; document.getElementById('analyzeSpinner').style.display = 'none';
        }
    }

    /* =========== DISPLAY RESULTS =========== */
    function displayResults(data) {
        const results = document.getElementById('analyzeResults');
        results.classList.add('visible');
        setTimeout(() => results.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);

        // Meta bar
        const meta = data._meta || {};
        const stats = data.stats || {};
        document.getElementById('metaBar').innerHTML = `<span>üìÑ ${stats.word_count || '?'} words</span><span>üìù ${stats.sentence_count || '?'} sentences</span><span>üî§ ${stats.unique_words || '?'} unique words</span>${meta.processing_ms ? `<span>‚ö° ${meta.processing_ms}ms</span>` : ''}${meta.cached ? '<span>üíæ Cached</span>' : ''}`;

        // Warnings
        const wl = document.getElementById('warningsList');
        if (data.warnings && data.warnings.length > 0) { wl.innerHTML = data.warnings.map(w => `<div class="warning-item">‚ö†Ô∏è ${esc(w)}</div>`).join(''); wl.style.display = 'flex'; }
        else { wl.innerHTML = ''; wl.style.display = 'none'; }

        // Score
        const scoreNum = document.getElementById('scoreNumber');
        animateCounter(scoreNum, Math.round(data.score));
        scoreNum.className = 'score-number ' + data.classification.toLowerCase();
        const badge = document.getElementById('classificationBadge');
        badge.className = 'classification-badge ' + data.classification.toLowerCase();
        document.getElementById('classificationEmoji').textContent = data.interpretation.emoji;
        document.getElementById('classificationText').textContent = data.interpretation.title;
        document.getElementById('interpretationTitle').textContent = data.interpretation.summary;
        document.getElementById('interpretationText').textContent = data.interpretation.meaning;

        // Features
        const cc = document.getElementById('featureChart'); cc.innerHTML = '';
        const tooltips = { sentence_length: 'Average words per sentence', vocabulary_complexity: '% of uncommon/technical words', abstract_density: 'Ratio of abstract concept words', concept_repetition: 'How often key terms repeat', readability: 'Flesch-based reading difficulty' };
        let delay = 0;
        Object.entries(data.features).forEach(([key, f]) => {
            const lvl = f.normalized < 35 ? 'low' : f.normalized < 65 ? 'medium' : 'high';
            const item = document.createElement('div'); item.className = 'feature-item'; item.style.animationDelay = delay + 's';
            item.innerHTML = `<div class="feature-header"><span class="feature-name">${f.label} <span class="tt" data-tip="${tooltips[key]||''}">‚ìò</span></span><span class="feature-value ${lvl}">${Math.round(f.normalized)}</span></div><div class="feature-bar-container"><div class="feature-bar ${lvl}" style="width:${f.normalized}%;animation-delay:${delay}s"></div></div><div class="feature-explanation">${f.explanation}</div>`;
            cc.appendChild(item); delay += 0.1;
        });

        // Study Plan
        const p = data.study_plan;
        document.getElementById('studyPlan').innerHTML = `
            <div class="plan-item"><div class="plan-icon">‚è±Ô∏è</div><div class="plan-value">${fmtTime(p.total_time_mins)}</div><div class="plan-label">Total Time</div></div>
            <div class="plan-item"><div class="plan-icon">üìö</div><div class="plan-value">${p.num_sessions}</div><div class="plan-label">Sessions</div></div>
            <div class="plan-item"><div class="plan-icon">üéØ</div><div class="plan-value">${p.session_length}</div><div class="plan-label">Min/Session</div></div>
            <div class="plan-item"><div class="plan-icon">‚òï</div><div class="plan-value">${p.break_mins}</div><div class="plan-label">Min Break</div></div>
            <div class="plan-item"><div class="plan-icon">üìù</div><div class="plan-value">${p.words_per_session}</div><div class="plan-label">Words/Session</div></div>
            <div class="plan-item"><div class="plan-icon">üìÑ</div><div class="plan-value">${p.total_words}</div><div class="plan-label">Total Words</div></div>`;

        // Tips
        document.getElementById('tipsList').innerHTML = data.tips.map((tip, i) => `<div class="tip-item" style="animation:slideInLeft .4s ease-out ${i*.1}s both"><span class="tip-icon">${tip.charAt(0)}</span><span>${tip.substring(2)}</span></div>`).join('');

        // Sections
        const sl = document.getElementById('sectionsList');
        if (data.sections && data.sections.length > 0) {
            sl.innerHTML = data.sections.map(s => {
                const lvl = s.score < 35 ? 'low' : s.score < 65 ? 'medium' : 'high';
                const color = lvl === 'low' ? 'var(--low-bar)' : lvl === 'medium' ? 'var(--medium-bar)' : 'var(--high-bar)';
                return `<div class="section-item"><span class="section-index ${lvl}">${s.index}</span><div class="section-details"><div class="section-preview">${esc(s.preview)}</div><div class="section-meta"><span>${s.word_count} words</span><span>Score: ${s.score}</span>${s.is_high_risk?'<span style="color:var(--high-text)">‚ö†Ô∏è Hard</span>':''}</div></div><div class="section-bar"><div class="section-bar-fill" style="width:${s.score}%;background:${color}"></div></div></div>`;
            }).join('');
        } else { sl.innerHTML = '<p style="color:var(--text-muted);text-align:center;padding:1rem">Single section ‚Äî no breakdown needed</p>'; }
    }

    /* =========== SIMPLIFY =========== */
    async function simplifyText() {
        if (!navigator.onLine) { showToast('error', 'Offline', 'Check your internet connection'); return; }
        if (!validateInput('simplifyInput', 5)) return;
        const text = document.getElementById('simplifyInput').value.trim();
        const btn = document.getElementById('simplifyBtn');
        btn.disabled = true;
        document.getElementById('simplifyBtnText').textContent = 'Simplifying...';
        document.getElementById('simplifySpinner').style.display = 'block';
        document.getElementById('simplifyError').style.display = 'none';
        document.getElementById('simplifyOutput').classList.remove('visible');

        showProgress('Simplifying Text...', 'Finding complex words and phrases');
        updateProgress(30, 'step-parse');

        try {
            const data = await apiCall(text);
            lastSimplifyData = data;
            updateProgress(100, 'step-plan');
            await new Promise(r => setTimeout(r, 300));
            hideProgress();
            displaySimplified(data, text);
            showToast('success', 'Simplified!', `${data.simplified.changes_count} word${data.simplified.changes_count !== 1 ? 's' : ''} changed`);
        } catch (error) {
            hideProgress();
            showErrorState('simplifyError', 'Simplification Failed', error.message || 'Something went wrong', 'simplifyText');
            showToast('error', 'Error', error.message || 'Failed');
        } finally {
            btn.disabled = false; document.getElementById('simplifyBtnText').textContent = '‚ú® Simplify Text'; document.getElementById('simplifySpinner').style.display = 'none';
        }
    }

    function displaySimplified(data, originalText) {
        document.getElementById('simplifyOutput').classList.add('visible');
        setTimeout(() => document.getElementById('simplifyOutput').scrollIntoView({ behavior: 'smooth' }), 100);
        document.getElementById('simplifyStatsBar').innerHTML = `<div class="simplify-stat"><div class="simplify-stat-value">${data.simplified.changes_count}</div><div class="simplify-stat-label">Words Changed</div></div><div class="simplify-stat"><div class="simplify-stat-value">${Math.round(data.score)}</div><div class="simplify-stat-label">Original Score</div></div><div class="simplify-stat"><div class="simplify-stat-value">${data.stats.word_count}</div><div class="simplify-stat-label">Word Count</div></div>`;
        document.getElementById('originalText').textContent = originalText;
        document.getElementById('simplifiedText').textContent = data.simplified.text;
        document.getElementById('copySimplifiedBtn').textContent = 'üìã Copy';
        document.getElementById('copySimplifiedBtn').classList.remove('copied');
        const cl = document.getElementById('wordChangesList');
        if (data.simplified.changes && data.simplified.changes.length > 0) {
            cl.innerHTML = data.simplified.changes.map(c => `<span class="word-change-item"><span class="word-old">${esc(c.original)}</span><span class="word-arrow">‚Üí</span><span class="word-new">${esc(c.simplified)}</span></span>`).join('');
        } else { cl.innerHTML = '<span style="color:var(--text-muted)">No complex words found ‚Äî text is already simple! üéâ</span>'; }
    }

    function copySimplified() {
        if (!lastSimplifyData) return;
        navigator.clipboard.writeText(lastSimplifyData.simplified.text).then(() => {
            const btn = document.getElementById('copySimplifiedBtn');
            btn.textContent = '‚úÖ Copied!'; btn.classList.add('copied');
            showToast('success', 'Copied', 'Simplified text copied to clipboard');
            setTimeout(() => { btn.textContent = 'üìã Copy'; btn.classList.remove('copied'); }, 2000);
        }).catch(() => showToast('error', 'Copy Failed', 'Could not copy to clipboard'));
    }

    /* =========== ERROR STATE =========== */
    function showErrorState(containerId, title, message, retryFn) {
        const c = document.getElementById(containerId);
        c.style.display = 'block';
        c.innerHTML = `<div class="error-card"><div class="error-icon">üòµ</div><div class="error-title">${title}</div><div class="error-message">${message}</div><button class="btn btn-primary btn-sm" onclick="${retryFn}()">üîÑ Try Again</button></div>`;
        c.scrollIntoView({ behavior: 'smooth' });
    }

    /* =========== EXPORT =========== */
    function exportResults(fmt) {
        if (!lastAnalysisData) { showToast('warning', 'No Data', 'Analyze text first'); return; }
        const d = lastAnalysisData; let content, filename, mime;
        if (fmt === 'json') { content = JSON.stringify(d, null, 2); filename = 'cognitive-load-analysis.json'; mime = 'application/json'; }
        else if (fmt === 'csv') {
            const rows = [['Metric','Value','Normalized','Level']];
            Object.entries(d.features).forEach(([k, f]) => { rows.push([f.label, f.raw, Math.round(f.normalized), f.normalized < 35 ? 'Low' : f.normalized < 65 ? 'Medium' : 'High']); });
            rows.push([], ['Overall Score', d.score, '', d.classification], ['Total Words', d.study_plan.total_words], ['Sessions', d.study_plan.num_sessions], ['Session Length', d.study_plan.session_length + ' min']);
            content = rows.map(r => r.join(',')).join('\n'); filename = 'cognitive-load-analysis.csv'; mime = 'text/csv';
        } else {
            const lines = ['=== CognitiveLoad AI Analysis ===', '', `Score: ${d.score}/100 (${d.classification})`, '', '--- Features ---'];
            Object.values(d.features).forEach(f => lines.push(`${f.label}: ${Math.round(f.normalized)}/100 ‚Äî ${f.explanation}`));
            lines.push('', '--- Study Plan ---', `Total: ${fmtTime(d.study_plan.total_time_mins)}`, `Sessions: ${d.study_plan.num_sessions} x ${d.study_plan.session_length} min`, `Break: ${d.study_plan.break_mins} min`, '', '--- Tips ---');
            d.tips.forEach(t => lines.push(t));
            if (d.warnings?.length) { lines.push('', '--- Warnings ---'); d.warnings.forEach(w => lines.push(w)); }
            content = lines.join('\n'); filename = 'cognitive-load-analysis.txt'; mime = 'text/plain';
        }
        downloadFile(content, filename, mime);
        showToast('success', 'Exported', `Downloaded ${filename}`);
    }
    function exportSimplified() { if (!lastSimplifyData) { showToast('warning', 'No Data', 'Simplify text first'); return; } downloadFile(lastSimplifyData.simplified.text, 'simplified-text.txt', 'text/plain'); showToast('success', 'Downloaded', 'Simplified text saved'); }
    function downloadFile(content, filename, mime) { const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([content], { type: mime })); a.download = filename; document.body.appendChild(a); a.click(); document.body.removeChild(a); }

    /* =========== CAROUSEL =========== */
    function initCarouselDots() {
        const cards = document.querySelectorAll('#reviewsTrack .review-card');
        const visible = window.innerWidth < 768 ? 1 : window.innerWidth < 1024 ? 2 : 3;
        const dots = Math.max(1, cards.length - visible + 1);
        const dc = document.getElementById('carouselDots'); dc.innerHTML = '';
        for (let i = 0; i < dots; i++) { const d = document.createElement('button'); d.className = 'carousel-dot' + (i === 0 ? ' active' : ''); d.onclick = () => { carouselPosition = i; renderCarousel(); }; dc.appendChild(d); }
    }
    function moveCarousel(dir) {
        const cards = document.querySelectorAll('#reviewsTrack .review-card');
        const visible = window.innerWidth < 768 ? 1 : window.innerWidth < 1024 ? 2 : 3;
        const max = cards.length - visible;
        carouselPosition += dir;
        if (carouselPosition < 0) carouselPosition = max;
        if (carouselPosition > max) carouselPosition = 0;
        renderCarousel();
    }
    function renderCarousel() {
        const cards = document.querySelectorAll('#reviewsTrack .review-card'); if (!cards.length) return;
        document.getElementById('reviewsTrack').style.transform = `translateX(-${carouselPosition * (cards[0].offsetWidth + 24)}px)`;
        document.querySelectorAll('.carousel-dot').forEach((d, i) => d.classList.toggle('active', i === carouselPosition));
    }
    initCarouselDots();
    window.addEventListener('resize', () => { carouselPosition = 0; initCarouselDots(); renderCarousel(); });
    setInterval(() => { if (document.getElementById('page-reviews').classList.contains('active')) moveCarousel(1); }, 5000);

    /* =========== UTILITIES =========== */
    function fmtTime(m) { if (m < 1) return '<1m'; if (m < 60) return Math.round(m) + 'm'; const h = Math.floor(m / 60), r = Math.round(m % 60); return r > 0 ? h + 'h ' + r + 'm' : h + 'h'; }
    function esc(s) { const d = document.createElement('div'); d.textContent = s; return d.innerHTML; }
    function animateCounter(el, target) { let cur = 0; const step = Math.max(1, Math.ceil(target / 40)); const iv = setInterval(() => { cur += step; if (cur >= target) { cur = target; clearInterval(iv); } el.textContent = cur; }, 25); }

    /* =========== KEYBOARD SHORTCUTS =========== */
    document.addEventListener('keydown', e => {
        if (e.ctrlKey && e.key === 'Enter') { e.preventDefault(); if (document.getElementById('page-analyze').classList.contains('active')) analyzeText(); else if (document.getElementById('page-simplify').classList.contains('active')) simplifyText(); }
        if (e.key === 't' && !['TEXTAREA', 'INPUT'].includes(document.activeElement.tagName)) toggleTheme();
        if (e.key === 'Escape') document.getElementById('navLinks').classList.remove('open');
    });
    </script>
</body>
</html>
