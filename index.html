<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CognitiveLoad AI - Analyze Your Study Materials</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Mode */
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --bg-card: #ffffff;
            --bg-surface: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --accent: #3b82f6;
            --accent-secondary: #8b5cf6;
            --accent-glow: rgba(59, 130, 246, 0.3);
            --low-bg: #dcfce7;
            --low-text: #166534;
            --medium-bg: #fef3c7;
            --medium-text: #92400e;
            --high-bg: #fee2e2;
            --high-text: #991b1b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #1e293b;
            --bg-surface: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #334155;
            --accent-glow: rgba(59, 130, 246, 0.4);
            --low-bg: #064e3b;
            --low-text: #6ee7b7;
            --medium-bg: #78350f;
            --medium-text: #fcd34d;
            --high-bg: #7f1d1d;
            --high-text: #fca5a5;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px var(--accent-glow); }
            50% { box-shadow: 0 0 20px var(--accent-glow), 0 0 40px var(--accent-glow); }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        .animate-slide-in {
            animation: slideIn 0.4s ease-out forwards;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 3rem 0;
            animation: fadeIn 0.6s ease-out;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 500;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 50px;
            padding: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .theme-toggle .icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover .icon {
            transform: rotate(20deg);
        }

        /* Input Section */
        .input-section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            animation: fadeIn 0.6s ease-out 0.1s backwards;
            border: 1px solid var(--border);
        }

        .input-section h2 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .textarea-wrapper {
            position: relative;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 1.25rem;
            border: 2px solid var(--border);
            border-radius: 16px;
            font-size: 1rem;
            font-family: inherit;
            line-height: 1.7;
            resize: vertical;
            background: var(--bg-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px var(--accent-glow);
        }

        textarea::placeholder {
            color: var(--text-muted);
        }

        .char-count {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Sample Buttons */
        .sample-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin: 1.25rem 0;
        }

        .sample-btn {
            padding: 0.6rem 1.2rem;
            border: 1px solid var(--border);
            border-radius: 50px;
            background: var(--bg-surface);
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .sample-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        /* Analyze Button */
        .analyze-btn {
            width: 100%;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-secondary) 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px var(--accent-glow);
        }

        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .analyze-btn.loading {
            animation: pulse 1.5s infinite;
        }

        .analyze-btn .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Results Section */
        .results {
            display: none;
        }

        .results.visible {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        /* Score Card */
        .score-card {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
        }

        .score-number {
            font-size: 5rem;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .score-number.low { color: var(--low-text); }
        .score-number.medium { color: var(--medium-text); }
        .score-number.high { color: var(--high-text); }

        .score-label {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .classification-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            animation: bounce 2s infinite;
        }

        .classification-badge.low {
            background: var(--low-bg);
            color: var(--low-text);
        }

        .classification-badge.medium {
            background: var(--medium-bg);
            color: var(--medium-text);
        }

        .classification-badge.high {
            background: var(--high-bg);
            color: var(--high-text);
        }

        .interpretation {
            margin-top: 1.5rem;
            text-align: left;
            padding: 1.5rem;
            background: var(--bg-surface);
            border-radius: 16px;
        }

        .interpretation h3 {
            font-size: 1.2rem;
            margin-bottom: 0.75rem;
        }

        .interpretation p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Grid Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* Card Styles */
        .card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 1.75rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card h3 {
            font-size: 1.15rem;
            font-weight: 600;
            margin-bottom: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Feature Chart */
        .feature-chart {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .feature-item {
            animation: slideIn 0.4s ease-out backwards;
        }

        .feature-item:nth-child(1) { animation-delay: 0.1s; }
        .feature-item:nth-child(2) { animation-delay: 0.2s; }
        .feature-item:nth-child(3) { animation-delay: 0.3s; }
        .feature-item:nth-child(4) { animation-delay: 0.4s; }
        .feature-item:nth-child(5) { animation-delay: 0.5s; }

        .feature-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .feature-name {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        .feature-value {
            font-weight: 700;
            font-size: 1rem;
        }

        .feature-bar-bg {
            height: 12px;
            background: var(--bg-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .feature-bar {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease-out;
        }

        .feature-bar.low { background: linear-gradient(90deg, #10b981, #34d399); }
        .feature-bar.medium { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .feature-bar.high { background: linear-gradient(90deg, #ef4444, #f87171); }

        .feature-explanation {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.4rem;
            padding-left: 0.5rem;
            border-left: 2px solid var(--border);
        }

        /* Study Plan */
        .study-plan-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .plan-item {
            background: var(--bg-surface);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.2s ease;
        }

        .plan-item:hover {
            transform: scale(1.02);
        }

        .plan-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent);
        }

        .plan-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* Tips */
        .tips-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: var(--bg-surface);
            border-radius: 12px;
            transition: all 0.2s ease;
            animation: slideIn 0.4s ease-out backwards;
        }

        .tip-item:nth-child(1) { animation-delay: 0.1s; }
        .tip-item:nth-child(2) { animation-delay: 0.2s; }
        .tip-item:nth-child(3) { animation-delay: 0.3s; }
        .tip-item:nth-child(4) { animation-delay: 0.4s; }

        .tip-item:hover {
            background: var(--accent);
            color: white;
            transform: translateX(5px);
        }

        .tip-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        /* Sections */
        .sections-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .section-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background: var(--bg-surface);
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .section-item:hover {
            transform: translateX(5px);
        }

        .section-item.high-risk {
            border-left: 4px solid var(--high-text);
        }

        .section-info {
            flex: 1;
        }

        .section-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .section-preview {
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .section-score {
            font-weight: 700;
            font-size: 1.1rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            min-width: 60px;
            text-align: center;
        }

        .section-score.low { background: var(--low-bg); color: var(--low-text); }
        .section-score.medium { background: var(--medium-bg); color: var(--medium-text); }
        .section-score.high { background: var(--high-bg); color: var(--high-text); }

        /* Simplified Text */
        .simplified-box {
            background: linear-gradient(135deg, var(--low-bg) 0%, var(--bg-surface) 100%);
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid var(--low-text);
        }

        .simplified-box h4 {
            color: var(--low-text);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .simplified-text {
            line-height: 1.8;
            color: var(--text-primary);
        }

        .word-changes {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .word-change {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            background: var(--bg-card);
            border-radius: 50px;
            font-size: 0.8rem;
        }

        .word-old {
            color: var(--high-text);
            text-decoration: line-through;
        }

        .word-arrow {
            color: var(--text-muted);
        }

        .word-new {
            color: var(--low-text);
            font-weight: 500;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .score-number {
                font-size: 3.5rem;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .study-plan-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <span class="icon" id="theme-icon">üåô</span>
    </button>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üß† CognitiveLoad AI</h1>
            <p>Understand how hard your study material is ‚Äî and how to tackle it</p>
        </header>

        <!-- Input Section -->
        <section class="input-section">
            <h2>üìÑ Paste Your Study Material</h2>
            
            <div class="sample-buttons">
                <button class="sample-btn" onclick="loadSample('biology')">üß¨ Biology</button>
                <button class="sample-btn" onclick="loadSample('physics')">‚öõÔ∏è Physics</button>
                <button class="sample-btn" onclick="loadSample('history')">üìú History</button>
                <button class="sample-btn" onclick="loadSample('simple')">üìñ Simple Text</button>
            </div>

            <div class="textarea-wrapper">
                <textarea 
                    id="text-input" 
                    placeholder="Paste your textbook content, lecture notes, or any study material here...

Tip: More text = better analysis!"
                    oninput="updateCharCount()"
                ></textarea>
                <span class="char-count" id="char-count">0 words</span>
            </div>

            <button class="analyze-btn" id="analyze-btn" onclick="analyze()">
                <span id="btn-text">üîç Analyze My Text</span>
                <div class="spinner" id="spinner" style="display: none;"></div>
            </button>
        </section>

        <!-- Results Section -->
        <section class="results" id="results">
            <!-- Score Card -->
            <div class="score-card">
                <div class="score-number" id="score-number">0</div>
                <div class="score-label">out of 100 difficulty</div>
                <div class="classification-badge" id="classification-badge">
                    <span id="classification-emoji">üìö</span>
                    <span id="classification-text">Loading...</span>
                </div>
                <div class="interpretation">
                    <h3 id="interpretation-title">Analyzing...</h3>
                    <p id="interpretation-text"></p>
                </div>
            </div>

            <div class="grid-2">
                <!-- Features Chart -->
                <div class="card">
                    <h3>üìä What Makes It Hard</h3>
                    <div class="feature-chart" id="feature-chart"></div>
                </div>

                <!-- Study Plan -->
                <div class="card">
                    <h3>üìÖ Break It Up</h3>
                    <div class="study-plan-grid" id="study-plan"></div>
                </div>
            </div>

            <div class="grid-2">
                <!-- Tips -->
                <div class="card">
                    <h3>üí° Study Tips</h3>
                    <div class="tips-list" id="tips-list"></div>
                </div>

                <!-- Sections -->
                <div class="card">
                    <h3>üéØ Section Analysis</h3>
                    <div class="sections-container" id="sections-list"></div>
                </div>
            </div>

            <!-- Simplified Text -->
            <div class="card">
                <h3>‚ú® Simplified Version</h3>
                <div class="simplified-box">
                    <h4>üìù Easier to Read</h4>
                    <div class="simplified-text" id="simplified-text"></div>
                    <div class="word-changes" id="word-changes"></div>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>CognitiveLoad AI ‚Äî Helping students learn smarter. No data is stored.</p>
        </footer>
    </div>

    <script>
        // Sample texts
        const samples = {
            biology: `Photosynthesis is the process by which green plants and some other organisms use sunlight to synthesize nutrients from carbon dioxide and water. Photosynthesis in plants generally involves the green pigment chlorophyll and generates oxygen as a by-product. The process occurs primarily in the leaves, specifically in the chloroplasts. During the light-dependent reactions, water molecules are split, releasing oxygen and producing ATP and NADPH. These energy carriers are then used in the Calvin cycle to fix carbon dioxide into glucose. The overall efficiency of photosynthesis is relatively low, typically around 3-6% of total solar radiation.`,
            
            physics: `The Copenhagen interpretation of quantum mechanics posits that physical systems do not have definite properties prior to measurement. The act of measurement causes the wavefunction to collapse, transitioning from a superposition of states to a single eigenstate. This interpretation introduces fundamental indeterminacy into physics, challenging classical notions of determinism. Heisenberg's uncertainty principle demonstrates that certain pairs of physical properties, like position and momentum, cannot be simultaneously measured with arbitrary precision. The implications of quantum mechanics extend to phenomena such as quantum entanglement, where particles become correlated in ways that cannot be explained by classical physics.`,
            
            history: `The Industrial Revolution began in Britain in the late 18th century. It was marked by a shift from manual labor to machine-based manufacturing. Key inventions included the steam engine, spinning jenny, and power loom. These innovations transformed textile production and sparked changes across many industries. The revolution led to urbanization as people moved from rural areas to factory towns. Working conditions in early factories were often harsh, leading to the rise of labor movements. The Industrial Revolution fundamentally changed society, economy, and daily life across Europe and eventually worldwide.`,
            
            simple: `Dogs are wonderful pets. They are loyal friends who love to play. Dogs need daily walks and exercise to stay healthy. Most dogs enjoy fetch and running around the park. They also need fresh water and nutritious food every day. Dogs communicate through barking, tail wagging, and body language. A happy dog often wags its tail when seeing its owner. Taking care of a dog requires time and patience, but the love they give back makes it worthwhile. Many families consider their dogs to be important members of the household.`
        };

        // Theme handling
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('theme-icon').textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('theme', newTheme);
        }

        // Init theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        document.getElementById('theme-icon').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

        // Load sample text
        function loadSample(key) {
            document.getElementById('text-input').value = samples[key];
            updateCharCount();
        }

        // Update character count
        function updateCharCount() {
            const text = document.getElementById('text-input').value;
            const words = text.trim().split(/\s+/).filter(w => w).length;
            document.getElementById('char-count').textContent = `${words} words`;
        }

        // Analyze text
        async function analyze() {
            const text = document.getElementById('text-input').value.trim();
            
            if (!text || text.split(/\s+/).length < 10) {
                alert('Please enter at least 10 words to analyze.');
                return;
            }

            const btn = document.getElementById('analyze-btn');
            const btnText = document.getElementById('btn-text');
            const spinner = document.getElementById('spinner');

            btn.disabled = true;
            btn.classList.add('loading');
            btnText.textContent = 'Analyzing...';
            spinner.style.display = 'block';

            try {
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text })
                });

                if (!response.ok) {
                    throw new Error('Analysis failed');
                }

                const data = await response.json();
                displayResults(data);

            } catch (error) {
                console.error('Error:', error);
                alert('Error analyzing text. Please try again.');
            } finally {
                btn.disabled = false;
                btn.classList.remove('loading');
                btnText.textContent = 'üîç Analyze My Text';
                spinner.style.display = 'none';
            }
        }

        // Display results
        function displayResults(data) {
            const results = document.getElementById('results');
            results.classList.add('visible');
            results.scrollIntoView({ behavior: 'smooth' });

            // Score
            const scoreNum = document.getElementById('score-number');
            scoreNum.textContent = data.score;
            scoreNum.className = 'score-number ' + data.classification.toLowerCase();

            // Classification badge
            const badge = document.getElementById('classification-badge');
            badge.className = 'classification-badge ' + data.classification.toLowerCase();
            document.getElementById('classification-emoji').textContent = data.interpretation.emoji;
            document.getElementById('classification-text').textContent = data.interpretation.title;

            // Interpretation
            document.getElementById('interpretation-title').textContent = data.interpretation.summary;
            document.getElementById('interpretation-text').textContent = data.interpretation.meaning;

            // Features chart
            const chartContainer = document.getElementById('feature-chart');
            chartContainer.innerHTML = '';
            
            Object.entries(data.features).forEach(([key, feature]) => {
                const level = feature.normalized < 35 ? 'low' : (feature.normalized < 65 ? 'medium' : 'high');
                chartContainer.innerHTML += `
                    <div class="feature-item">
                        <div class="feature-header">
                            <span class="feature-name">${feature.label}</span>
                            <span class="feature-value ${level}">${Math.round(feature.normalized)}</span>
                        </div>
                        <div class="feature-bar-bg">
                            <div class="feature-bar ${level}" style="width: ${feature.normalized}%"></div>
                        </div>
                        <div class="feature-explanation">${feature.explanation}</div>
                    </div>
                `;
            });

            // Study plan
            const plan = data.study_plan;
            document.getElementById('study-plan').innerHTML = `
                <div class="plan-item">
                    <div class="plan-value">${formatTime(plan.total_time_mins)}</div>
                    <div class="plan-label">Total Study Time</div>
                </div>
                <div class="plan-item">
                    <div class="plan-value">${plan.num_sessions}</div>
                    <div class="plan-label">Study Sessions</div>
                </div>
                <div class="plan-item">
                    <div class="plan-value">${plan.session_length} min</div>
                    <div class="plan-label">Per Session</div>
                </div>
                <div class="plan-item">
                    <div class="plan-value">${plan.break_mins} min</div>
                    <div class="plan-label">Break Time</div>
                </div>
                <div class="plan-item">
                    <div class="plan-value">${plan.words_per_session}</div>
                    <div class="plan-label">Words/Session</div>
                </div>
                <div class="plan-item">
                    <div class="plan-value">${plan.total_words}</div>
                    <div class="plan-label">Total Words</div>
                </div>
            `;

            // Tips
            const tipsList = document.getElementById('tips-list');
            tipsList.innerHTML = data.tips.map(tip => `
                <div class="tip-item">
                    <span class="tip-icon">${tip.charAt(0)}</span>
                    <span>${tip.substring(2)}</span>
                </div>
            `).join('');

            // Sections
            const sectionsList = document.getElementById('sections-list');
            sectionsList.innerHTML = data.sections.slice(0, 5).map(section => {
                const level = section.score < 35 ? 'low' : (section.score < 65 ? 'medium' : 'high');
                const highRisk = section.is_high_risk ? 'high-risk' : '';
                return `
                    <div class="section-item ${highRisk}">
                        <div class="section-info">
                            <div class="section-title">Section ${section.index}</div>
                            <div class="section-preview">${section.preview}</div>
                        </div>
                        <div class="section-score ${level}">${Math.round(section.score)}</div>
                    </div>
                `;
            }).join('');

            // Simplified text
            document.getElementById('simplified-text').textContent = data.simplified.text.substring(0, 500) + (data.simplified.text.length > 500 ? '...' : '');
            
            const wordChanges = document.getElementById('word-changes');
            if (data.simplified.changes.length > 0) {
                wordChanges.innerHTML = data.simplified.changes.slice(0, 10).map(change => `
                    <span class="word-change">
                        <span class="word-old">${change.original}</span>
                        <span class="word-arrow">‚Üí</span>
                        <span class="word-new">${change.simplified}</span>
                    </span>
                `).join('');
            } else {
                wordChanges.innerHTML = '<span style="color: var(--text-muted)">No complex words found to simplify!</span>';
            }
        }

        // Format time
        function formatTime(minutes) {
            if (minutes < 1) return '<1 min';
            if (minutes < 60) return `${Math.round(minutes)} min`;
            const hrs = Math.floor(minutes / 60);
            const mins = Math.round(minutes % 60);
            return mins > 0 ? `${hrs}h ${mins}m` : `${hrs}h`;
        }
    </script>
</body>
</html>
